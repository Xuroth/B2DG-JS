{{#extend "css"}}
<link rel="stylesheet" href="/css/offcanvas.css"> {{!-- Offcanvas Plugin --}}
{{/extend}}
<nav class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
    <a href="/" class="navbar-brand">{{settings.title}}</a>
    <button class="navbar-toggler" type="button" data-toggle="offcanvas" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle main navigation">
        <i class="fal fa-bars"></i>
    </button>
    <div class="navbar-collapse offcanvas-collapse" id="mainNavbar">
        <ul class="navbar-nav mr-auto">
            {{#each settings.navigationBar.navLinks as |navLink|}}
                {{#if navLink.hidden}}
                    
                {{else}}
                    {{#if navLink.loginRequired}}
                  
                        {{#if ../user.username}}
                         
                            <li class="nav-item">
                                <a href="{{navLink.route}}" class="nav-link">{{navLink.text}}</a>
                            </li>
                        {{else}}
                            
                        {{/if}}
                    {{else}}
                        <li class="nav-item">
                            <a href="{{navLink.route}}" class="nav-link">{{navLink.text}}</a>
                        </li>
                    {{/if}}
                {{/if}}
            {{/each}}
            {{!-- <li class="nav-item">
                <a href="/" class="nav-link">Home</a>
            </li>
            <li class="nav-item">
                <a href="/products" class="nav-link">Products</a>
            </li>
            <li class="nav-item">
                <a href="/about" class="nav-link">About Us</a>
            </li>
            <li class="nav-item">
                <a href="/contact" class="nav-link">Contact</a>
            </li> --}}
            {{#if user.username}}
            <li class="nav-item">
                <a href="#" class="nav-link">{{user.username}}</a>
            </li>
            <li class="nav-item">
                <a href="/logout" class="nav-link">Logout</a>
            </li>
            {{!-- <li class="nav-item">
                <a href="/testPerm" class="nav-link">PermTest</a>
            </li> --}}
            {{else}}
            <li class="nav-item">
                <a href="/login" class="nav-link">Login</a>
            </li>
            {{/if}}
        </ul>
        
    </div>
</nav>

{{#extend "js"}}
<script>
    //Basic Offcanvas toggler. Should be expanded to allow each toggle to point to a specific #id.
    $(function() {
        'use strict'

        $('[data-toggle="offcanvas"]').on('click', function() {
            $('.offcanvas-collapse').toggleClass('open')
        })
    })
</script>
{{/extend}}